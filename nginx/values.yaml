replicaCount: 1

image:
  repository: nginx
  tag: "1.25.3"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 443

# TLS configuration for pod-level encryption
tls:
  enabled: true
  # Secret name where cert-manager stores the certificate
  secretName: nginx-tls
  # ClusterIssuer or Issuer reference
  issuerRef:
    name: letsencrypt-prod
    kind: ClusterIssuer
  # DNS names for the certificate
  dnsNames:
    - nginx.aniva.co

# Ingress configuration (ALB direct to pod)
ingress:
  enabled: true
  className: "alb"
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
    alb.ingress.kubernetes.io/ssl-redirect: "443"
    alb.ingress.kubernetes.io/backend-protocol: HTTPS
    alb.ingress.kubernetes.io/healthcheck-protocol: HTTPS
    alb.ingress.kubernetes.io/healthcheck-path: /health
    # ACM certificate ARN - replace with your certificate
    alb.ingress.kubernetes.io/certificate-arn: ""
  hosts:
    - host: nginx.aniva.co
      paths:
        - path: /
          pathType: Prefix
  tls: []

# Vault Agent Injector configuration
vault:
  enabled: true
  # Vault role for Kubernetes auth (must match role in Vault)
  role: nginx
  # Service account to use for Vault auth
  serviceAccountName: default
  # Secrets to inject (written to /vault/secrets/<key>)
  secrets:
    config:
      path: "secret/data/nginx/config"
      # Optional: template to format the secret
      template: |
        {{- with secret "secret/data/nginx/config" -}}
        export EXAMPLE_KEY="{{ .Data.data.example_key }}"
        {{- end }}

resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 50m
    memory: 64Mi

nodeSelector: {}
tolerations: []
affinity: {}
